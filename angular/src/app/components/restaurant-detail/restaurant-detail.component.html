<div class="bg-white p-6 rounded-lg shadow space-y-6">
  <div class="space-y-2">
    <h1 class="text-3xl font-bold">{{ restaurant?.name }}</h1>
    <p class="text-gray-500">
      {{ restaurant?.category }} · {{ restaurant?.foodType }}<br>
      {{ restaurant?.city }}, {{ restaurant?.country }}
    </p>
    <p class="text-gray-500 italic">{{ restaurant?.address }}</p>
    <p class="text-gray-700">{{ restaurant?.description }}</p>
    <div class="text-yellow-500 font-semibold">★ {{ restaurant?.rating?.toFixed(1) }}</div>
  </div>

  <div *ngIf="restaurant?.photos?.length" class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <img
      *ngFor="let photo of restaurant.photos"
      [src]="photo"
      class="rounded-lg object-cover w-full h-48"
      alt="Photo"
    />
  </div>

  <div class="mt-8">
    <h2 class="text-xl font-bold mb-4">Reviews</h2>

    <!-- Leave a Review -->
<div *ngIf="isLoggedIn(); else loginReminder" class="mt-6 space-y-2">
  <h3 class="text-lg font-semibold">Leave a Review</h3>

  <label class="block text-sm font-medium text-gray-700">Rating</label>
  <select
    [(ngModel)]="newReviewRating"
    class="w-24 p-1 border rounded focus:outline-none focus:ring focus:border-blue-300"
  >
    <option *ngFor="let r of [5,4,3,2,1]" [value]="r">{{ r }}</option>
  </select>

  <label class="block text-sm font-medium text-gray-700 mt-2">Comment</label>
  <textarea
    [(ngModel)]="newReviewComment"
    placeholder="Write your comment..."
    rows="3"
    class="w-full p-2 border rounded focus:outline-none focus:ring focus:border-blue-300"
  ></textarea>

  <label class="block text-sm font-medium text-gray-700 mt-2">Photo (optional)</label>
<input
  type="file"
  (change)="onFileSelected($event)"
  accept="image/*"
  class="block mt-1"
/>

  <button
    (click)="submitReview()"
    class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
  >
    Submit Review
  </button>
  
</div>
<ng-template #loginReminder>
  <p class="text-gray-600">
    Please <a routerLink="/login" class="text-blue-600 underline">log in</a> to leave a review.
  </p>
</ng-template>
    <app-review-card
      *ngFor="let review of reviews"
      [review]="review"
      (deleteReview)="deleteReview($event)"
    ></app-review-card>
  </div>
</div>
